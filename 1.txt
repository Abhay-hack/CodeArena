ğŸ§  Goal: High-level System Design of CodeArena
ğŸ—‚ï¸ Overview

             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚   Frontend    â”‚ â† React.js + Tailwind
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ REST / WebSocket
             â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚   Backend     â”‚ â† Node.js + Express.js
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    Code Judge (Worker)     â”‚ â† Docker-based
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚           â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Redis Queueâ”‚ â”‚GitHub (Raw) â”‚ â† Templates
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚            â”‚
       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚PostgreSQL â”‚  â”‚ Object Storeâ”‚ â† Optional
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


1ï¸âƒ£ Frontend (React.js)
Features:
Browse problems, contests, submissions

Code editor (Monaco)

Real-time leaderboard via WebSocket

Fetch template from GitHub Raw

Example:
ts
Copy
Edit
GET https://raw.githubusercontent.com/CodeArenaOfficial/code-templates/main/problem-1001/python.py


2ï¸âƒ£ Backend API (Express.js)
Responsibilities:
User Auth (JWT)

CRUD for problems, submissions

Serve contest logic

Push submissions to judge queue

Fetch template URLs dynamically

Endpoints:
bash
Copy
Edit
GET    /api/problems
GET    /api/problems/:id
POST   /api/submit
GET    /api/submissions/:id
GET    /api/templates/:problemId/:language


3ï¸âƒ£ Database (PostgreSQL)
Tables:
users

problems

submissions

contests

contest_participants

languages

testcases

Store only metadata here. Code templates are fetched from GitHub.



4ï¸âƒ£ Code Judge System
Components:
Worker service running in background

Listens to Redis queue

Executes submitted code inside Docker container

Compares against test cases

Sends result back to backend

Tech:
Redis + BullMQ (queue)

Docker SDK

Python/Golang scripts to manage input/output



5ï¸âƒ£ GitHub as File System (for templates)
Strategy:
Store templates in a public repo:

https://github.com/CodeArenaOfficial/code-templates

Structure:

bash
Copy
Edit
code-templates/
â””â”€â”€ problem-1001/
    â”œâ”€â”€ python.py
    â”œâ”€â”€ cpp.cpp
    â””â”€â”€ java.java
Integration Flow:
User selects problem + language

Frontend sends request

Backend constructs raw GitHub URL

Frontend loads content into editor



6ï¸âƒ£ Redis Queue
Purpose:
Store pending submissions

Decouple frontend request from judging

Allow retry/delayed processing



7ï¸âƒ£ Judge Worker (Docker Sandbox)
Secure container for running untrusted code

Language-based containers: C++, Python, Java, etc.

Executes code â†’ collects stdout â†’ compares with expected

Output to Backend:
json
Copy
Edit
{
  status: "Accepted",
  runtime: 132,
  memory: 25,
  testcases_passed: 5
}


8ï¸âƒ£ Optional: Object Storage (MinIO / S3)
Used only if storing:

Uploaded problem images

Large testcases

Logs / reports

ğŸ” Security Considerations
Component	Strategy
Code Execution	Docker sandboxing, resource limits
Templates	GitHub as source (read-only)
Auth	JWT with refresh tokens
Input Validation	Sanitize code, language, filenames
Rate Limit	API throttle per user/IP
Webhook Abuse	Validate GitHub webhook signatures (if used)





ğŸ§ª Example Submission Flow
User writes code in editor.

Clicks "Submit".

Frontend calls POST /api/submit.

Backend adds to Redis queue.

Judge service pulls from queue.

Runs in Docker, validates output.

Sends result back â†’ updates DB â†’ notifies user.

ğŸ“ˆ Scaling Strategy (Later)
Layer	Scale with
Backend	Load balancer + multiple Node.js instances
Judge	Multiple workers across VMs
DB	Indexes, read replicas
Static Files	CDN (for frontend + templates if moved from GitHub)
Templates	Optionally cache GitHub content via Redis